name: Test Secret Scanning

on:
  push:
    branches: [test/secret-scan-workflow]
  pull_request:
    branches: [master]

permissions:
  contents: read

jobs:
  secret-scan-basic:
    name: Basic Secret Scan
    uses: maxrantil/.github/.github/workflows/secret-scan-reusable.yml@feat/issue-7-secret-scanning
    with:
      gitleaks-version: 'latest'
      fail-on-error: true

  secret-scan-custom:
    name: Secret Scan with Custom Config
    uses: maxrantil/.github/.github/workflows/secret-scan-reusable.yml@feat/issue-7-secret-scanning
    with:
      gitleaks-version: 'latest'
      config-path: '.gitleaks.toml'
      fail-on-error: false
      scan-path: '.'
